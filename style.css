/* ---------- FLOATING ROSES ---------- */
for (let i = 0; i < 20; i++) {
  const rose = document.createElement("div");
  rose.className = "rose-float";
  rose.innerHTML = "ðŸŒ¹";
  rose.style.left = Math.random() * 100 + "vw";
  rose.style.animationDuration = 10 + Math.random() * 10 + "s";
  document.body.appendChild(rose);
}

/* ---------- SPARKLES ---------- */
for (let i = 0; i < 30; i++) {
  const sparkle = document.createElement("div");
  sparkle.className = "sparkle";
  sparkle.style.left = Math.random() * 100 + "vw";
  sparkle.style.top = Math.random() * 100 + "vh";
  sparkle.style.animationDelay = Math.random() * 3 + "s";
  document.body.appendChild(sparkle);
}

/* ---------- SHOW ROSE (FIRST CLICK) ---------- */
function showRose(btn) {
  // hide first button
  btn.style.display = "none";

  // show rose section
  document.getElementById("roseSection").style.display = "block";

  // start music (allowed because user clicked)
  const music = document.getElementById("bgMusic");
  if (music) {
    music.volume = 0.6;
    music.play();
  }
}

/* ---------- SHOW PHOTOS (SECOND CLICK) ---------- */
function showPhotos(btn) {
  // hide second button
  btn.style.display = "none";

  // show photos row
  document.getElementById("photos").style.display = "flex";

  // heart burst effect
  heartBurst();
}

/* ---------- HEART BURST ---------- */
function heartBurst() {
  for (let i = 0; i < 15; i++) {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerHTML = "ðŸ’–";
    heart.style.left = 50 + (Math.random() * 20 - 10) + "vw";
    heart.style.top = "60vh";
    heart.style.fontSize = "18px";
    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 1000);
  }
}

/* ---------- CURSOR HEART TRAIL (DESKTOP ONLY) ---------- */
document.addEventListener("mousemove", (e) => {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "ðŸ’–";
  heart.style.left = e.clientX + "px";
  heart.style.top = e.clientY + "px";
  document.body.appendChild(heart);

  setTimeout(() => heart.remove(), 1000);
});

/* ---------- COUNTDOWN ---------- */
const valentinesDate = new Date("Feb 14, 2026 00:00:00").getTime();

setInterval(() => {
  const now = new Date().getTime();
  const diff = valentinesDate - now;

  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
  const mins = Math.floor((diff / (1000 * 60)) % 60);

  const countdown = document.getElementById("countdown");
  if (countdown) {
    countdown.innerHTML =
      `â³ ${days} days ${hours} hrs ${mins} mins left for Valentineâ€™s Day â¤ï¸`;
  }
}, 1000);

/* ---------- FULLSCREEN PHOTO VIEWER ---------- */
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".photos-row img").forEach(img => {
    img.addEventListener("click", () => {
      document.getElementById("viewerImg").src = img.src;
      document.getElementById("viewer").classList.remove("hidden");
    });
  });
});

function closeViewer() {
  document.getElementById("viewer").classList.add("hidden");
}
